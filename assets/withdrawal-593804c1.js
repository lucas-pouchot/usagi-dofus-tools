var A=Object.defineProperty;var U=(r,e,l)=>e in r?A(r,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[e]=l;var d=(r,e,l)=>(U(r,typeof e!="symbol"?e+"":e,l),l);import{d as k,a as D,u as I,g as w,h as C,o as E,c as R,b as m,w as g,F as W,r as P,i as u,f as V,j as y,t as B,e as x,k as N}from"./index-a342b2f6.js";class M{constructor(e){d(this,"level");d(this,"nodes");this.nodes=[],this.level=e}}class F{constructor(e,l,a=null,n=null){d(this,"data");d(this,"index");d(this,"level");d(this,"left");d(this,"right");d(this,"parent");d(this,"path",[]);this.data=a,this.index=l,this.level=e,this.parent=n,this.left=null,this.right=null}}class Y{constructor(e){d(this,"levels",[]);d(this,"depth");this.depth=e}getLastLevel(){return this.levels.find(e=>e.level===this.depth)||new M(this.depth)}initTree(){this.levels=[];const e=[];for(let l=0,a=this.depth;l<a;l++)this.levels.push(new M(l));for(let l=0,a=Math.pow(2,this.depth);l<a;l++)e.push(0),e.push(0);this._initTree(e)}_initTree(e,l=0,a=[0]){let n=this.levels.find(h=>h.level===l);n||(n=new M(l),this.levels.push(n));let f=1,v=0;a.forEach((h,T)=>{f+=h*Math.pow(2,T)});for(let h=this.depth;h>l;h--)v+=Math.pow(2,h);let s=n.nodes.find(h=>h.index===v+f);return s||(s=new F(n,v+f),n.nodes.push(s)),s.path=Array.from(a.slice(0,-1).reverse()),s.left=null,s.right=null,e.length>2&&(s.left=this._initTree(e.slice(0,Math.ceil(e.length/2)),l+1,[0].concat(a)),s.right=this._initTree(e.slice(Math.ceil(e.length/2)),l+1,[1].concat(a))),s}}function j(r,e,l,a){let n=50*(l/a)*(e/r);return n<10?n=10:n>90&&(n=90),n/100}const L=x("br",null,null,-1),S=x("br",null,null,-1),q=x("br",null,null,-1),z=x("br",null,null,-1),G=x("br",null,null,-1),H=x("br",null,null,-1),J=x("br",null,null,-1),K=k({__name:"withdrawal",props:{loading:{type:Boolean},windowWidth:null},setup(r){const e=r;D(),I(),w("grid");const l=w(!1);C(()=>l.value||e.loading);const a=w(4),n=w(4),f=w(4),v=w(200),s=w(100),h=C(()=>{const T=new Y(a.value);T.initTree();const i=T.getLastLevel();i.nodes.forEach(o=>{var c;o.data={success:o.path.reduce((t,p)=>t+p,0),proba:1,factors:[]};let b=0;for(let t=0;t<o.path.length;t++){let p=j(n.value,f.value-b,v.value,s.value);b+=o.path[t],o.path[t]===0&&(p=1-p),(c=o.data)==null||c.factors.push(p*100),o.data.proba*=p}});const _=[];for(let o=0;o<=a.value;o++){let b=i.nodes.filter(c=>{var t;return((t=c.data)==null?void 0:t.success)===o}).map(c=>{var t;return((t=c.data)==null?void 0:t.proba)||0});_.push({success:o,proba:b.reduce((c,t)=>c+t,0)*100})}return _});return(T,i)=>{const _=P("InputNumber"),o=P("Card"),b=P("Column"),c=P("DataTable");return E(),R(W,null,[m(o,null,{title:g(()=>[u(" Data ")]),content:g(()=>[u(" Your target have : "),L,m(_,{modelValue:V(n),"onUpdate:modelValue":i[0]||(i[0]=t=>y(n)?n.value=t:null),min:0,max:100},null,8,["modelValue"]),u(" MP/AP max "),S,u(" currently "),m(_,{modelValue:V(f),"onUpdate:modelValue":i[1]||(i[1]=t=>y(f)?f.value=t:null),min:0,max:100},null,8,["modelValue"]),u(" MP/AP "),q,m(_,{modelValue:V(s),"onUpdate:modelValue":i[2]||(i[2]=t=>y(s)?s.value=t:null),min:0,max:1e3},null,8,["modelValue"]),u(" dodge "),z,G,H,u(" You have "),m(_,{modelValue:V(v),"onUpdate:modelValue":i[3]||(i[3]=t=>y(v)?v.value=t:null),min:0,max:1e3},null,8,["modelValue"]),u(" withdrawal "),J,u(" and you want to withdraw "),m(_,{modelValue:V(a),"onUpdate:modelValue":i[4]||(i[4]=t=>y(a)?a.value=t:null),min:0,max:1e3},null,8,["modelValue"]),u(" MP/AP ")]),_:1}),m(o,{class:"mt-4"},{title:g(()=>[u(" Result ")]),content:g(()=>[m(c,{value:V(h)},{default:g(()=>[m(b,{field:"success",header:"number of PM/AP withdraw"},{body:g(({data:t,field:p})=>[u(B(t[p]),1)]),_:1}),m(b,{field:"proba",header:"Chance of event"},{body:g(({data:t,field:p})=>[u(B(t[p].toPrecision(4))+"% ",1)]),_:1})]),_:1},8,["value"])]),_:1})],64)}}});typeof N=="function"&&N(K);export{K as default};
